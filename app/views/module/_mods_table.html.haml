%table.table.table-striped

  %thead
    %tr
      %th= sort_link_helper "Shared?", "shared"
      %th= sort_link_helper "In Use?", "used"
      %th= sort_link_helper "Label", "name"
      %th
      %th= sort_link_helper "Last Update", "date"
      %th= sort_link_helper "Content Type", "type"
      %th= sort_link_helper "Global?", "global"
      %th= sort_link_helper "Published?", "publish"

  .tbody
    - @mods.each do |mod|
      - row_id = "row#{mod.id}#{mod.class}"
      %tr
        %td
          - unless mod.shared?
            = link_to image_tag("icons/user_add.png", :title => 'Click to Share this Module', :alt => 'Share', :border => 0), :controller => 'module', :action => 'share',  :id => mod, :type => mod.class
          - else
            = link_to image_tag("icons/users.png", :title => 'This module has been shared. Click to Share with others.', :alt => 'Share', :border => 0), :controller => 'module',  :action => 'share',  :id => mod, :type => mod.class
        %td
          - if mod.used?
            %span.more_help{:onmouseout => "delayhidetip();", :onmouseover => "fixedtooltip('#{render_used_tooltip(mod)}', this, event, '325px');"}
              = link_to image_tag("icons/star.png", :alt => 'Used', :border => 0), :controller => 'module', :action => 'manage',  :id => mod, :type => mod.class
          - else
            %span.more_help{:onmouseout => "delayhidetip();", :onmouseover => "fixedtooltip('<strong>#{mod.module_title}</strong> is not currently being used. Click to add this module to a guide, page or tutorial', this, event, '325px');"}
              = link_to image_tag("icons/no-star.png", :alt => 'Not Used', :border => 0), :controller => 'module', :action => 'manage',  :id => mod, :type => mod.class
        %td= truncate(h(mod.label),:length => 55)
        %td
          = link_to image_tag("icons/edit.png", :title => 'Edit this Module', :alt => 'edit', :border => 0), edit_content_path(mod, :type => mod.class), :class =>'space'
          | #{link_to image_tag("icons/document_preview.png", :title => 'Preview this Module in New Window', :alt => 'preview', :border => 0), module_path(mod, :type => mod.class), :class =>'space', :popup => ['', 'height=400,width=480,toolbar=yes, scrollbars =yes,resizable=yes']}
          | #{link_to image_tag("icons/application_add.png", :title => 'Copy this Module', :alt => 'copy', :border => 0), copy_module_path(mod, :type => mod.class) ,:class =>'space'}
          | #{link_to image_tag("icons/remove.png", :title => 'Delete this Module', :alt => 'delete', :border => 0), {:url => { :controller => 'module', :action => 'remove_from_user', :id => mod,  :type => mod.class, :page => @page, :sort => @sort,  :all => @all },:update => row_id , :confirm => 'Are you sure you want to delete this module from your list?'}, :href => url_for(:action => 'remove_from_user', :controller => 'module',:id => mod, :type => mod.class, :page => @page, :sort => @sort , :all => @all), :remote => true}
        %td= mod.updated_at.to_date
        %td= mod.content_type
        %td= render :partial => "/module/global" ,:locals => {:mod => mod, :page => @page, :sort => @sort , :all => @all}
        %td= render :partial => "/module/publish" ,:locals => {:mod => mod, :page => @page, :sort => @sort , :all => @all}
