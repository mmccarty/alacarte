- if flash[:error]
  #error_wrapper
    #list_error= flash[:error]

= link_to new_tutorial_path, class: 'btn btn-primary' do
  %i.icon-plus
  Create New Tutorial

%table.table.table-striped
  %thead
    %tr
      %th Shared?
      %th Title
      %th
        %span.tip edit | view | copy | delete
      %th Last Update
      %th Published?
      %th Archived?
  %tbody
    - @tutorials.each do |tutorial|
      %tr
        %td
          - if tutorial.shared? == false
            = link_to image_tag("icons/user_add.png", :title => 'Click to share this tutorial', :alt => 'Share', :border => 0),  :action => 'share', :id => tutorial
          - else
            = link_to image_tag("icons/users.png", :title => 'This Tutorial is Shared. Click to share this tutorial with others.', :alt => 'Share', :border => 0),  :action => 'share',  :id => tutorial

        %td
          = truncate(h(tutorial.name),:length => 65)
        - search = false if search.nil?
        - tutorial_params = tutorial_search_params(search,tutorial)

        %td
          = link_to image_tag("icons/edit.png", :title => 'Edit this Tutorial', :alt => 'Edit', :border => 0), {:controller=> 'tutorial',:action => 'update',  :id => tutorial },:class =>'space'
          | #{link_to image_tag("icons/document_preview.png", :title => 'Preview this Tutorial in a New Window', :alt => 'preview', :border => 0), { :controller => "ort", :action => 'index', :id => tutorial}, :popup => ['', 'height=800,width=980,toolbar=yes, scrollbars =yes,resizable=yes'], :class =>'space'}
          | #{link_to image_tag("icons/application_add.png", :title => 'Copy this tutorial', :alt => 'Copy Tutorial', :border => 0),{ :controller=> 'tutorial',:action => 'copy',  :id => tutorial},:class =>'space'}
          | #{link_to image_tag("icons/remove.png", :title => 'Delete this tutorial', :alt => 'delete', :border => 0), {:url => tutorial_params['destroy'],:update => "row#{tutorial.id}" , :confirm => 'Are you sure you want to delete this tutorial from your list?'}, :href => url_for(tutorial_params['destroy']),:class =>'space', :method => :post, :remote => true}

        %td
          = tutorial.updated_at.to_date

        %td
          - unless tutorial.published?
            = link_to  image_tag("icons/Minus.png", :title => 'Publish this Tutorial', :alt => 'publish this tutorial', :border => 0), {:url => tutorial_params['publish'],:update => "row#{tutorial.id}", :confirm => 'Are you sure you want to publish this tutorial?'}, |
              :href => url_for(tutorial_params['publish']),:method => :post, :remote => true                                                                                                                                                                               |
          - else
            = link_to  image_tag("icons/Plus.png", :title => 'Unpublish this Tutorial', :alt => 'unpublish this tutorial', :border => 0),  {:url => tutorial_params['publish'],:update => "row#{tutorial.id}", :confirm => 'Are you sure you want to unpublish this tutorial?'}, |
              :href => url_for(tutorial_params['publish']),:method => :post, :remote => true                                                                                                                                                                                     |

        %td
          - unless tutorial.archived?
            = link_to  image_tag("icons/Minus.png", :title => 'Archive this Tutorial', :alt => 'archive this tutorial', :border => 0), {:url => tutorial_params['archive'],:update => "row#{tutorial.id}", :confirm => 'Are you sure you want to archive this tutorial?'}, |
              :href => url_for(tutorial_params['archive']),:method => :post, :remote => true                                                                                                                                                                               |
          - else
            = link_to  image_tag("icons/archive.png", :title => 'Remove from Archive', :alt => 'remove from archive', :border => 0), {:url => tutorial_params['archive'],:update => "row#{tutorial.id}", :confirm => 'Are you show you want to remove this tutorial from archive?'}, |
              :href => url_for(tutorial_params['archive']),:method => :post, :remote => true                                                                                                                                                                                         |

= will_paginate @tutorials
