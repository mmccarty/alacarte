%table
  %thead
    %tr
      %th{:class => sort_th_class_helper "shared"}
        = sort_link_helper "Shared?", "shared"
      %th{:class => sort_th_class_helper "name"}
        = sort_link_helper "Title", "name"
        = image_tag "spinner.gif", :id => "spinner_sort", :class => 'image', :alt => "Spinner", :style => 'display:none;'
      %th
        %span.tip edit | view | copy | delete
      %th{:class => sort_th_class_helper "date"}
        = sort_link_helper "Last Update", "date"
      %th{:class => "#{sort_th_class_helper "publish"} center"}
        = sort_link_helper "Published?", "publish"
      %th{:class => "#{sort_th_class_helper "archive"} center"}
        = sort_link_helper "Archived?", "archive"
  - for page in @pages
    %tr{:class => cycle('list-line-odd', 'list-line-even'), :id => "row#{page.id}"}
      = render :partial => "index_row" ,:locals => {:id => page,:page => @pag, :sort => @sort}
.pagination
  - if !@all and @pages.total_pages > 1
    %ul
      %li= will_paginate @pages, :params => params.merge({:sort=> @sort}).except(:authenticity_token)
      %li= link_to 'show all', :loading => "Element.show('spinner_links')",                                                                    |
          :complete => "Element.hide('spinner_links')", :url => {:action => 'index_all', :sort => @sort },:update => 'table', :remote => true |
      %li= image_tag "spinner.gif", :id => "spinner_links", :class => 'image', :alt => "Spinner", :style => 'display:none;'
  - elsif @all
    %ul
      %li= link_to 'show less', :action => 'index', :sort => @sort
